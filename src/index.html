<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="shortcut icon" type="image/x-icon" href="favicon.ico">

    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="format-detection" content="telephone=no">
    <meta name="color-scheme" content="light dark">
    <meta name="supported-color-schemes" content="light dark">

    <title>Vernam Cipher</title>

    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link rel="stylesheet" type="text/css" href="style.css"/>
</head>
<body class="main" style="visibility: hidden;">
<header class="header">
    <h1 class="header__title">Vernam Cipher</h1>
</header>
<main class="container">
    <form id="encrypt" class="tab__content  tab__content--selected">
        <div class="panel" id="encrypt-text-panel">
            <label for="encrypt-text" class="panel__label">Plain Text</label>
            <div class="panel__group">
                <input id="encrypt-text" class="panel__input" type="text"
                       tabindex="1" placeholder="Plain Text">
                <button id="hash-unhash-button" class="panel__button" title="Hash/Plain text">
                    <svg viewBox="0 0 8 8" width="24" height="24">
                        <use xlink:href="open-iconic.svg#lock-unlocked"></use>
                    </svg>
                </button>
            </div>
        </div>
        <div class="panel">
            <label for="encrypt-secret" class="panel__label">Secret</label>
            <div class="panel__group">
                <input id="encrypt-secret" class="panel__input" type="password"
                       tabindex="2" placeholder="Secret">
                <button id="show-hide-button" class="panel__button" title="Show/Hide Secret">
                    <svg viewBox="0 0 8 8" width="24" height="24">
                        <use xlink:href="open-iconic.svg#eye"></use>
                    </svg>
                </button>
            </div>
        </div>
        <div class="panel">
            <label for="encrypt-cipher" class="panel__label">Cipher Text</label>
            <div class="panel__group">
                <input id="encrypt-cipher" class="panel__input" type="text"
                       tabindex="3" placeholder="Cipher Text" readonly>
                <button id="copy-to-clipboard-button" class="panel__button" title="Copy To Clipboard">
                    <svg viewBox="0 0 8 8" width="24" height="24">
                        <use xlink:href="open-iconic.svg#clipboard"></use>
                    </svg>
                </button>
            </div>
        </div>
    </form>
    <button id="expand-collapse-button" class="summary__expand-button" title="Expand/Collapse Summary">
        <svg viewBox="0 0 8 8" width="12" height="12">
            <use xlink:href="open-iconic.svg#caret-right"></use>
        </svg>
        Summary
    </button>
    <div id="expand-collapse-content" class="summary  collapsed">
        <div class="summary-row">
            <b>Text-Hash:</b>
            <span id="text-hash">-</span>
        </div>
        <div class="summary-row">
            <b>Secret-Hash:</b>
            <span id="secret-hash">-</span>
        </div>
        <div class="summary-row">
            <b>Length:</b>
            <span id="password-length">0</span>
        </div>
        <div class="summary-row">
            <b>Guesses:</b>
            <span id="guesses">0</span>
        </div>
        <div class="summary-row">
            <b>Guesses-log(10):</b>
            <span id="guesses-log">0</span>
        </div>
        <div class="summary-row">
            <b>Calc-time:</b>
            <span id="calctime">0</span>
        </div>
        <div class="summary-row">
            <b>Score:</b>
            <span id="score">0</span>
        </div>
    </div>
</main>
<script type="application/javascript" src="<%= output.filename %>"></script>
<h1>Hello, Telegram!</h1>

<script>
  const tg = window.Telegram.WebApp;

  tg.expand(); // развернуть на весь экран

  // изменить цвет кнопки подтверждения
  tg.MainButton.setText("Продолжить");
  tg.MainButton.show();

  tg.MainButton.onClick(() => {
    tg.sendData(JSON.stringify({ ok: true }));
  });
</script>
</body>
</html>
